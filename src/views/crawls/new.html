<!-- <pre>{{ crawlsNew.data | json }}</pre> -->
<form ng-if="!crawlsNew.showMap" novalidate>
  <div class="field">
    <label for="name">Name</label>
    <input class="input" placeholder="Name" name="name" ng-model="crawlsNew.data.name" required />
    <div ng-if="crawlsNew.form.name.$touched || crawlsNew.form.$submitted">
      <small ng-if="crawlsNew.form.name.$error.required">This field is required</small>
    </div>
  </div>
  <div class="field">
    <label for="date">Date</label>
    <input class="input" type="date" name="date" ng-model="crawlsNew.data.date" required />
    <div ng-if="crawlsNew.form.date.$touched || crawlsNew.form.$submitted">
      <small ng-if="crawlsNew.form.date.$error.required">This field is required</small>
    </div>
  </div>
  <div class="field">
    <label for="tubeLine">Tube Line</label>
    <div class="control">
      <div class="select">
        <select name="tubeLine" ng-model="crawlsNew.data.tubeLine">
          <option value="" selected disabled>Tube Line</option>
          <option value="bakerloo">Bakerloo</option>
          <option value="central">Central</option>
          <option value="circle">Circle</option>
          <option value="district">District</option>
          <option value="hammersmith-city">Hammersmith and City</option>
          <option value="jubilee">Jubilee</option>
          <option value="metropolitan">Metropolitan</option>
          <option value="northern">Northern</option>
          <option value="piccadilly">Piccadilly</option>
          <option value="victoria">Victoria</option>
          <option value="waterloo-city">Waterloo and City</option>
        </select>
      </div>
    </div>
    <div ng-if="crawlsNew.form.tubeLine.$touched || crawlsNew.form.$submitted">
      <small ng-if="crawlsNew.form.tubeLine.$error.required">This field is required</small>
    </div>
  </div>
  <div class="field" ng-if="crawlsNew.stations.length > 0">
    <label for="startPoint">Start Point</label>
    <div class="control">
      <div class="select">
        <select name="startPoint" ng-model="crawlsNew.data.startPoint">
          <option value="" selected disabled>Start Point</option>
          <option ng-value="station" ng-repeat="station in crawlsNew.stations">{{ station.name }}</option>
        </select>
      </div>
    </div>
    <div ng-if="crawlsNew.form.startPoint.$touched || crawlsNew.form.$submitted">
      <small ng-if="crawlsNew.form.startPoint.$error.required">This field is required</small>
    </div>
  </div>
  <div class="field" ng-if="crawlsNew.stations.length > 0">
    <label for="endPoint">End Point</label>
    <div class="control">
      <div class="select">
        <select name="endPoint" ng-model="crawlsNew.data.endPoint">
          <option value="" selected disabled>End Point</option>
          <option ng-value="station" ng-repeat="station in crawlsNew.stations">{{ station.name }}</option>
        </select>
      </div>
    </div>
    <div ng-if="crawlsNew.form.endPoint.$touched || crawlsNew.form.$submitted">
      <small ng-if="crawlsNew.form.endPoint.$error.required">This field is required</small>
    </div>
  </div>


  <button ng-if="crawlsNew.data.name && crawlsNew.data.date && crawlsNew.data.startPoint && crawlsNew.data.endPoint" class="button is-primary" ng-click="crawlsNew.getCrawlStations()">Continue</button>

  <!-- ng-submit="crawlsNew.handleCreate()" -->
</form>
<div class="columns">
  <div class="column">
    <div g-map center="{ lat: 51.515, lng: -0.078 }" class="map" ng-if="crawlsNew.showMap" stations="crawlsNew.crawlStations" get-bars="crawlsNew.getBars(bars)" bars="crawlsNew.bars" add-bar="crawlsNew.addBar(bar)">
    </div>
  </div>

  <div class="column">
    <section ng-if="crawlsNew.showMap">
      <h2>Itinerary</h2>
      <h1>{{ crawlsNew.data.name }}</h1>
      <p>Date: {{ crawlsNew.data.date }}</p>
      <p>Line: {{ crawlsNew.data.tubeLine }}</p>
      <p>Start Station: {{ crawlsNew.data.startPoint.name }}</p>
      <p>End Station: {{ crawlsNew.data.endPoint.name }}</p>
      <div class="bar-info" ng-repeat="pub in crawlsNew.data.pubs">
        <ul>
          <li>{{ pub.name }}</li>
          <li>{{ pub.address }}</li>
          <li><img ng-src="{{ pub.image }}"></li>
        </ul>
      </div>
      <button class="button is-primary" ng-click="crawlsNew.handleCreate()">Save Crawl</button>
    </section>
  </div>
</div>



<ul>
  <li ng-repeat="bar in crawlsNew.bars">
    <a class="disable-pubs" ng-click="crawlsNew.addBar(bar)">{{ bar.name }}</a>
    <div class="bar-details" ng-show="showDetails">
      <p>Address: {{ bar.vicinity}}</p>
      <p>{{ bar.geometry.location }}</p>
    </div>
  </li>
</ul>
